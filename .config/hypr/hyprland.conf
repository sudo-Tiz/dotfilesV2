#
# Monitors & workspaces: nwg-displays generates 2 files, which we include here:
#
source = ~/.config/hypr/monitors.conf
monitor=eDP-1,preferred,auto,1

# VARIABLES
$term = foot
$browser = qutebrowser
$browserbis = brave 
$browserter = firefox
$filemanager = $term yazicd
$filemanagerbis = thunar
$editor = $term nvim
$launcher = nwg-drawer
$statusbar = ashell # ~/.config/tsumiki/init.sh -start

#
# Autostart. Feel free to add your own entries.
#
exec = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec-once = ~/.local/bin/setbg
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = squeekboard # On-Screen-Keyboard
exec-once = ~/.local/bin/rcloud # Nextcloud
exec-once = iio-hyprland
exec-once = hyprsunset
exec-once = wl-paste --type text --watch cliphist store
exec-once = wl-paste --type image --watch cliphist store
exec-once = hypridle
exec-once = $statusbar
exec-once = swaync
exec-once = syshud
exec = nwg-drawer -r -c 6 -is 64 -fscol 2 -nofs -closebtn left -s hyprland-0.css -term foot -ft -pbexit 'hyprctl dispatch exit' -pblock 'systemctl suspend-then-hibernate' -pbpoweroff 'systemctl -i poweroff' -pbreboot 'systemctl reboot' -pbsleep 'systemctl hibernate' -pbsize 48
# exec = ulauncher --hide-window

bindr = SUPER, D, exec, $launcher
bind = SUPER, W, exec, $browser
bind = SUPER SHIFT, W, exec, $browserbis
bind = SUPER CONTROL, W, exec, $browserter
bind = SUPER, V, exec, $editor
bind = SUPER, E, exec, $filemanager
bind = SUPER SHIFT, E, exec, $filemanagerbis
bind = SUPER, M, exec, thunderbird
bind = SUPER, C, exec, pkill wofi || cliphist list | wofi --dmenu | cliphist decode | wl-copy
bind = SUPER SHIFT, D, exec, neopassmenu
bind = SUPER, A, exec, pkill wofi || wofi -f -i -m -S run -w 4 # -W 100% -H 97%         #TODO: better integ
bind = SUPER SHIFT, A, exec, pkill wofi || wofi -f -I -i -m -S drun -w 4 # -W 100% -H 97% 
bind = SUPER, X, exec, $term
bind = SUPER, Return, exec, $term
bind = SUPER, N, exec, $term newsboat
bind = SUPER, O, exec, signal-desktop
bind = SUPER, B, exec, blueman-manager
bind = SUPER, Backspace, exec, sysact
bind = SUPER, U, exec, dmenuunicode

# ZOOM 
bind = SUPER, Z, exec, hyprctl keyword cursor:zoom_factor "$(hyprctl getoption cursor:zoom_factor | awk 'NR==1 {factor = $2; if (factor < 1) {factor = 1}; print factor * 1.25}')" 
bind = SUPER SHIFT, Z,  exec, hyprctl keyword cursor:zoom_factor "$(hyprctl getoption cursor:zoom_factor | awk 'NR==1 {factor = $2; if (factor < 1) {factor = 1}; print factor / 1.25}')"
bind = SUPER SHIFT, mouse_down, exec, hyprctl keyword cursor:zoom_factor "$(hyprctl getoption cursor:zoom_factor | awk 'NR==1 {factor = $2; if (factor < 1) {factor = 1}; print factor * 1.25}')"
bind = SUPER SHIFT, mouse_up, exec, hyprctl keyword cursor:zoom_factor "$(hyprctl getoption cursor:zoom_factor | awk 'NR==1 {factor = $2; if (factor < 1) {factor = 1}; print factor / 1.25}')"

bind = SUPER, F, fullscreen
bind = SUPER SHIFT, F, exec, hyprpanel toggleWindow bar-0
bind = SUPER, S, pin
bind = SUPER, Q, killactive,
bind = SUPER SHIFT, Q, exec, hyprctl kill
bind = SUPER, G, exec, hyprfreeze -a
bind = SUPER, Space, togglefloating,
bind = SUPER, asterisk, exec, hyprctl reload      # reload Hyprland
bind = SUPER SHIFT, asterisk, exec, ~/.config/tsumiki/init.sh -restart
bind = SUPER SHIFT, Y, movetoworkspace, special  # move to the special workspace
bind = SUPER, Y, togglespecialworkspace          # show/hide special workspace
bind = SUPER, Tab, togglesplit,                       # (dwindle)

# MOVE FOCUS with mainMod + arrow keys
bind = SUPER, left, movefocus, l
bind = SUPER, right, movefocus, r
bind = SUPER, up, movefocus, u
bind = SUPER, down, movefocus, d

# MOVE FOCUS with mainMod + vim keys
bind = SUPER, H, movefocus, l
bind = SUPER, L, movefocus, r
bind = SUPER, J, movefocus, u
bind = SUPER, K, movefocus, d

# MOVE WINDOW with mainMod SHIFT + arrow keys
bind = SUPER SHIFT, left, movewindow, l
bind = SUPER SHIFT, right, movewindow, r
bind = SUPER SHIFT, up, movewindow, u
bind = SUPER SHIFT, down, movewindow, d

# MOVE WINDOW with mainMod SHIFT + vim keys
bind = SUPER SHIFT, H, movewindow, l
bind = SUPER SHIFT, L, movewindow, r
bind = SUPER SHIFT, J, movewindow, u
bind = SUPER SHIFT, K, movewindow, d

# RESIZE WINDOW with mainMod CONTROL + arrow keys
binde = SUPER CONTROL, left, resizeactive, -10 0
binde = SUPER CONTROL, right, resizeactive, 10 0
binde = SUPER CONTROL, up, resizeactive, 0 -10
binde = SUPER CONTROL, down, resizeactive, 0 10

# RESIZE WINDOW with mainMod CONTROL + vim keys
binde = SUPER CONTROL, H, resizeactive, -10 0
binde = SUPER CONTROL, L, resizeactive, 10 0
binde = SUPER CONTROL, J, resizeactive, 0 -10
binde = SUPER CONTROL, K, resizeactive, 0 10

# SWITCH WORKSPACES with mainMod + [0-9]
bind = SUPER, code:10, workspace, 1
bind = SUPER, code:11, workspace, 2
bind = SUPER, code:12, workspace, 3
bind = SUPER, code:13, workspace, 4
bind = SUPER, code:14, workspace, 5
bind = SUPER, code:15, workspace, 6
bind = SUPER, code:16, workspace, 7
bind = SUPER, code:17, workspace, 8
bind = SUPER, code:18, workspace, 9
bind = SUPER, code:19, workspace, 10

# MOVE ACTIVE WINDOW TO A WORKSPACE with mainMod + SHIFT + [0-9]
bind = SUPER SHIFT, code:10, movetoworkspace, 1
bind = SUPER SHIFT, code:11, movetoworkspace, 2
bind = SUPER SHIFT, code:12, movetoworkspace, 3
bind = SUPER SHIFT, code:13, movetoworkspace, 4
bind = SUPER SHIFT, code:14, movetoworkspace, 5
bind = SUPER SHIFT, code:15, movetoworkspace, 6
bind = SUPER SHIFT, code:16, movetoworkspace, 7
bind = SUPER SHIFT, code:17, movetoworkspace, 8
bind = SUPER SHIFT, code:18, movetoworkspace, 9
bind = SUPER SHIFT, code:19, movetoworkspace, 10

# MOVE ACTIVE WINDOW TO A WORKSPACE SILENTLY with mainMod + CONTROL + [0-9]
bind = SUPER CONTROL, code:10, movetoworkspacesilent, 1
bind = SUPER CONTROL, code:11, movetoworkspacesilent, 2
bind = SUPER CONTROL, code:12, movetoworkspacesilent, 3
bind = SUPER CONTROL, code:13, movetoworkspacesilent, 4
bind = SUPER CONTROL, code:14, movetoworkspacesilent, 5
bind = SUPER CONTROL, code:15, movetoworkspacesilent, 6
bind = SUPER CONTROL, code:16, movetoworkspacesilent, 7
bind = SUPER CONTROL, code:17, movetoworkspacesilent, 8
bind = SUPER CONTROL, code:18, movetoworkspacesilent, 9
bind = SUPER CONTROL, code:19, movetoworkspacesilent, 10

bind = SUPER, I, swapactiveworkspaces, current +1
# bind = SUPER, G, grabroguewindows

# SCROLL THROUGH EXISTING WORKSPACES with mainMod + scroll
bind = SUPER, mouse_down, workspace, current+1
bind = SUPER, mouse_up, workspace, current-1

# MOVE/RESIZE WINDOWS with mainMod + LMB/RMB and dragging
bindm = SUPER, mouse:272, movewindow
bindm = SUPER, mouse:273, resizewindow

# SCREENSHOT
# # TODO: need a dmenu tool here
bind = , Print, exec, screenshot fullscreen                           # full screen
bind = CONTROL, Print, exec, screenshot display                       # focused display
bind = SUPER SHIFT+CONTROL, Print, exec, screenshot focused        # focused window
bind = SHIFT+CONTROL, Print, exec, screenshot swappy                  # selected region -> swappy
# bind = SHIFT+CONTROL, Print, exec, screenshot region                # or selected region w/o swappy
# Bookmarks
bind = SUPER, Print, exec, dmenulink

# Fn keys
# bind = , XF86TouchpadToggle, exec, hyprshaderz 
# bind = SUPER, XF86MonBrightnessDown, exec, hyprshaderz extradark
# bind = SUPER, XF86MonBrightnessUp, exec, hyprshaderz light
bind = , XF86MonBrightnessUp, exec, if [ $(brightnessctl get) -eq 0 ]; then brightnessctl -q set 1; else brightnessctl -q s 5%+; fi
bind = , XF86MonBrightnessDown, exec,  brightnessctl -q s 5%- 
bind = , XF86AudioRaiseVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ +5% 
bind = , XF86AudioLowerVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ -5%
bind = SUPER, XF86AudioRaiseVolume, exec, $term pulsemixer
bind = SUPER, XF86AudioLowerVolume, exec, $term pulsemixer
bind = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bind = , XF86AudioMicMute, exec, pactl set-source-mute @DEFAULT_SOURCE@ toggle
bind = , code:156, exec, ~/.local/bin/monitor_mode_switcher t
# bind = , XF86Launch1, exec,
# bind = , XF86WebCam, exec,


# bind = , XF86Display, exec,
# bind = , Menu, exec,
# bind = , XF86PowerOff, exec,
# bind = , XF86Tools, exec,

bind = , XF86AudioPlay, exec, playerctl play-pause # Audio play pause
bind = , XF86AudioPause, exec, playerctl pause # Audio pause
bind = , XF86AudioNext, exec, playerctl next # Audio next
bind = , XF86AudioPrev, exec, playerctl previous # Audio previous
bind = , XF86Lock, exec, nwg-lock # Open screenlock


# Gestures 
gesture = 3, horizontal, scale: 1.5, workspace
gesture = 3, up, scale: 1.5, fullscreen
gesture = 4, swipe, scale: 1.5, move


# KEY BINDINGS SUBMAP TO RESIZE WINDOWS WITH ARROW KEYS
# switch to a submap called resize
bind = SUPER, R, submap, resize

# start a submap called "resize"
submap = resize

# set repeatable binds for resizing the active window
binde = , L, resizeactive, 10 0
binde = , H, resizeactive, -10 0
binde = , J, resizeactive, 0 -10
binde = , K, resizeactive, 0 10

# RESIZE WINDOW with mainMod CONTROL + vim keys
binde = , left, resizeactive, -10 0
binde = , right, resizeactive, 10 0
binde = , up, resizeactive, 0 -10
binde = , down, resizeactive, 0 10

# use reset to go back to the global submap
bind = , catchall, submap, reset

# will reset the submap, which will return to the global submap
submap = reset
# keybinds further down will be global again...


general {
    border_size = 1
    no_border_on_floating = false
    gaps_in = 3
    gaps_out = 3
    col.active_border = rgba(33ccffee) rgba(00ff99ee) 45deg
    col.inactive_border = rgba(595959aa)
    layout = dwindle
    extend_border_grab_area = true
    hover_icon_on_border = true
}
dwindle {
    pseudotile = false
    force_split = 0
    preserve_split = true
    smart_split = false
    smart_resizing = true
    special_scale_factor = 0.8
    split_width_multiplier = 1.0
    use_active_for_splits = true
    default_split_ratio = 1.0
}

master {
    allow_small_split = false
    special_scale_factor = 0.8
    mfact = 0.55
    new_on_top = false
    orientation = left
    inherit_fullscreen = true
}

input {
    kb_layout = fr
    numlock_by_default = true
    repeat_rate = 100
    repeat_delay = 300
    natural_scroll = false
    follow_mouse = 1
    mouse_refocus = true
    float_switch_override_focus = 1
    touchpad {
        disable_while_typing = false
        natural_scroll = true
        scroll_factor = 1.0
        tap-to-click = true
        tap-and-drag = true
    }
}

misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
    vrr = 0
    mouse_move_enables_dpms = false
    key_press_enables_dpms = false
    layers_hog_keyboard_focus = true
    focus_on_activate = false
    mouse_move_focuses_monitor = true
}

decoration {
    rounding = 5
    blur {
         enabled = true
         size = 3
         passes = 1
         new_optimizations = true
    }
}

animations {
    enabled = true
    bezier = myBezier, 0.05, 0.9, 0.1, 1.05
    animation = windows, 1, 7, myBezier
    animation = windowsOut, 1, 7, default, popin 80%
    animation = border, 1, 10, default
    animation = borderangle, 1, 8, default
    animation = fade, 1, 7, default
    animation = workspaces, 1, 6, default
}


# Example per-device config
# See https://wiki.hyprland.org/Configuring/Keywords/#executing for more
# device:epic-mouse-v1 {
#     sensitivity = -0.5
# }

# Example windowrule v1
# windowrule = float, ^(galculator|azote)$

layerrule = blur , fabric
layerrule = ignorezero, fabric
layerrule = blur ,gtk-layer-shell
layerrule = ignorezero ,gtk-layer-shell

